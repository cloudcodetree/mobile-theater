# D-1.1: ESP32 Development Environment Setup

**Phase:** 1 — Wireless Proof of Concept  
**Estimated Cost:** $20  
**Status:** ⬜ Not Started  
**Dependencies:** None  

---

## Overview

Set up the ESP32 development environment and verify basic functionality with two ESP32-S3 boards.

---

## Acceptance Criteria

- [ ] ESP-IDF or Arduino IDE installed and configured
- [ ] Both ESP32-S3 boards flash successfully
- [ ] Serial monitor shows output from both boards
- [ ] Basic ESP-NOW "hello world" communication works

---

## Bill of Materials

| Item | Qty | Unit Price | Total | Source | Status |
|------|-----|------------|-------|--------|--------|
| ESP32-S3-DevKitC-1 | 2 | $10.00 | $20.00 | Amazon / Mouser | ⬜ |
| USB-C Cable | 2 | — | — | (use existing) | ⬜ |

---

## Tasks

- [ ] Install ESP-IDF v5.x OR Arduino IDE with ESP32 board support
- [ ] Connect first ESP32-S3 via USB
- [ ] Flash "blink" test to verify toolchain
- [ ] Repeat for second ESP32-S3
- [ ] Flash ESP-NOW sender to board 1
- [ ] Flash ESP-NOW receiver to board 2
- [ ] Verify messages received in serial monitor

---

## Technical Notes

### Option A: ESP-IDF (Recommended)

```bash
# Install ESP-IDF
mkdir -p ~/esp
cd ~/esp
git clone -b v5.2 --recursive https://github.com/espressif/esp-idf.git
cd esp-idf
./install.sh esp32s3
source export.sh

# Create test project
cd ~/esp
cp -r $IDF_PATH/examples/get-started/blink .
cd blink
idf.py set-target esp32s3
idf.py build
idf.py -p /dev/ttyUSB0 flash monitor
```

### Option B: Arduino IDE

1. Install Arduino IDE 2.x
2. File → Preferences → Additional Board URLs:
   ```
   https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
   ```
3. Tools → Board → Boards Manager → Install "esp32"
4. Select: ESP32S3 Dev Module
5. Upload blink sketch

### ESP-NOW Test Code

**Sender (Board 1):**
```cpp
#include <esp_now.h>
#include <WiFi.h>

uint8_t broadcastAddress[] = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};

void setup() {
  Serial.begin(115200);
  WiFi.mode(WIFI_STA);
  esp_now_init();
  esp_now_peer_info_t peerInfo = {};
  memcpy(peerInfo.peer_addr, broadcastAddress, 6);
  esp_now_add_peer(&peerInfo);
}

void loop() {
  char msg[] = "Hello from TX";
  esp_now_send(broadcastAddress, (uint8_t *)msg, sizeof(msg));
  Serial.println("Sent");
  delay(1000);
}
```

**Receiver (Board 2):**
```cpp
#include <esp_now.h>
#include <WiFi.h>

void onReceive(const uint8_t *mac, const uint8_t *data, int len) {
  Serial.printf("Received: %s\n", (char*)data);
}

void setup() {
  Serial.begin(115200);
  WiFi.mode(WIFI_STA);
  esp_now_init();
  esp_now_register_recv_cb(onReceive);
}

void loop() {}
```

---

## Test Procedure

1. Flash sender code to Board 1
2. Flash receiver code to Board 2
3. Open serial monitors for both boards
4. Verify Board 2 prints "Received: Hello from TX" every second
5. Test range by moving boards apart

---

## Expected Results

| Test | Expected | Actual |
|------|----------|--------|
| Board 1 flashes | ✅ | — |
| Board 2 flashes | ✅ | — |
| ESP-NOW message sent | ✅ | — |
| ESP-NOW message received | ✅ | — |
| Range > 10m indoors | ✅ | — |

---

## References

- [ESP-IDF Getting Started](https://docs.espressif.com/projects/esp-idf/en/latest/esp32s3/get-started/)
- [ESP-NOW Guide](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/network/esp_now.html)
- [Arduino ESP32 Installation](https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html)

---

## Work Log

### YYYY-MM-DD
- (Add progress notes here)
